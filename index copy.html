<html>


<head>
    <link rel="stylesheet" type="text/css" href="css3.css" />

    <title>Tic Tac Toe</title>
    <script type="text/javascript">
        //Global Variables
        var isPainted; //checks if box on canvas is painted already
        var canvasContent; //content of a canvas
        var winningCombos; //holds winning combos

        var theCanvas;

        var c; //holds canvas
        var cxt; // holds context of canvas to draw xy
        var turn = 0;
        var squaresFilled = 0;
        var xWins = 0;
        var yWins = 0;
        var ties = 0;

        var y;

        //will not let canvas content be written if isPainted is true

        window.onload = function() {
            isPainted = new Array();
            canvasContent = new Array();

            winningCombos = [
                [0, 1, 2],
                [3, 4, 5],
                [6, 7, 8],
                [0, 3, 6],
                [1, 4, 7],
                [2, 5, 8],
                [0, 4, 8],
                [2, 4, 6]
            ];
            //            newGameCookies();

            for (var x = 0; x < 9; x++) { // sets all spots to not painted and no content
                isPainted[x] = false;
                canvasContent[x] = ' ';
            }
        }

        function newGameCookies() {
            var cname = "c1";
            var cvalue = "z";
            var d = new Date();
            d.setTime(d.getTime() + (5 * 24 * 60 * 60 * 1000));
            var expires = "expires=" + d.toUTCString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";

            var name = cname + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var j = ca[i];
                while (j.charAt(0) == ' ') {
                    j = j.substring(1);
                }
                if (j.indexOf(name) == 0) {
                    alert(j.substring(name.length, j.length));
                }
            }
        }

        function canvasClicked(canvasNumber) {
            theCanvas = "canvas" + canvasNumber;
            c = document.getElementById(theCanvas);
            //accesses the document, find if there is an id which corresponds to the "theCanvas" variable
            cxt = c.getContext("2d");


            if (isPainted[canvasNumber] == false) {
                //if nothing on a spot
                if (turn % 2 == 0) {
                    cxt.beginPath();
                    cxt.moveTo(10, 10);
                    cxt.lineTo(90, 90);
                    cxt.moveTo(90, 10);
                    cxt.lineTo(10, 90);

                    cxt.stroke();
                    cxt.closePath();
                    turn++;
                    canvasContent[canvasNumber] = 'X';
                } else {
                    cxt.beginPath();
                    cxt.arc(50, 50, 40, 0, Math.PI * 2, true);

                    cxt.stroke();
                    cxt.closePath();
                    turn++;
                    canvasContent[canvasNumber] = 'O';
                }
                isPainted[canvasNumber] = true;
                squaresFilled++;

                checkForWinners(canvasContent[canvasNumber]);
                if (squaresFilled == 9) {
                    alert("Tie Game!");
                    playAgain();
                }
            }


        }

        function checkForWinners(symbol) {

            for (var a = 0; a < winningCombos.length; a++) {
                if (canvasContent[winningCombos[a][0]] == symbol && canvasContent[winningCombos[a][1]] == symbol && canvasContent[winningCombos[a][2]] == symbol) {
                    alert(symbol + " Wins!");
                    playAgain();
                }
            }

        }

        function playAgain() {
            for (var x = 0; x < 9; x++) {
                isPainted[x] = false;
                canvasContent[x] = ' ';
                c = document.getElementById("canvas" + x);
                cxt = c.getContext("2d");
                cxt.clearRect(0, 0, c.width, c.height);
            }
            squaresFilled = 0;
            turn = 0;
        }

    </script>



</head>

<body>
    <h1>Tic Tac Toe</h1>
    <h2> Kevin Tran</h2>

    <canvas id="canvas0" width="100" height="100" style="border:1px solid black" onclick="canvasClicked(0)"></canvas>

    <canvas id="canvas1" width="100" height="100" style="border:1px solid black" onclick="canvasClicked(1)"></canvas>

    <canvas id="canvas2" width="100" height="100" style="border:1px solid black" onclick="canvasClicked(2)"></canvas><br/>

    <canvas id="canvas3" width="100" height="100" style="border:1px solid black" onclick="canvasClicked(3)"></canvas>

    <canvas id="canvas4" width="100" height="100" style="border:1px solid black" onclick="canvasClicked(4)"></canvas>

    <canvas id="canvas5" width="100" height="100" style="border:1px solid black" onclick="canvasClicked(5)"></canvas><br/>

    <canvas id="canvas6" width="100" height="100" style="border:1px solid black" onclick="canvasClicked(6)"></canvas>

    <canvas id="canvas7" width="100" height="100" style="border:1px solid black" onclick="canvasClicked(7)"></canvas>

    <canvas id="canvas8" width="100" height="100" style="border:1px solid black" onclick="canvasClicked(8)"></canvas>


</body>

</html>
